---
// Voice API Demo Page
// Demonstrates Telnyx Voice API capabilities with Deepgram STT
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SHANGO Voice Assistant Demo - TETRIX</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <div class="container mx-auto px-4 py-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold text-gray-800 mb-4">
        ðŸŽ¤#127908;#127908;#127908; SHANGO Voice Assistant Demo
      </h1>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto">
        Experience the power of our enhanced Voice API with Telnyx integration, 
        Deepgram Speech-to-Text, and TeXML call flow management.
      </p>
    </div>

    <!-- Features Overview -->
    <div class="grid md:grid-cols-3 gap-6 mb-8">
      <div class="bg-white p-6 rounded-lg shadow-md">
        <div class="text-3xl mb-3">ðŸŽ¯</div>
        <h3 class="text-xl font-semibold mb-2">TeXML Integration</h3>
        <p class="text-gray-600">
          Advanced call flow management with XML-based voice responses, 
          input gathering, and dynamic call routing.
        </p>
      </div>
      
      <div class="bg-white p-6 rounded-lg shadow-md">
        <div class="text-3xl mb-3">ðŸ§ #129504;#129504;#129504;</div>
        <h3 class="text-xl font-semibold mb-2">Deepgram STT</h3>
        <p class="text-gray-600">
          Real-time speech-to-text transcription with high accuracy, 
          language detection, and speaker diarization.
        </p>
      </div>
      
      <div class="bg-white p-6 rounded-lg shadow-md">
        <div class="text-3xl mb-3">ðŸ¤–#129302;#129302;#129302;</div>
        <h3 class="text-xl font-semibold mb-2">AI Integration</h3>
        <p class="text-gray-600">
          Seamless integration with SHANGO AI for intelligent responses 
          and natural conversation flow.
        </p>
      </div>
    </div>

    <!-- Voice Call Interface -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
      <h2 class="text-2xl font-bold mb-4 text-gray-800">Voice Call Interface</h2>
      <p class="text-gray-600 mb-4">Voice call interface component will be loaded here.</p>
      <div class="bg-gray-100 p-4 rounded">
        <p class="text-sm text-gray-500">Component temporarily disabled for build testing</p>
      </div>
    </div>

    <!-- Cross-Platform Integration Status -->
    <div class="mb-8">
      <h2 class="text-2xl font-bold mb-4 text-gray-800">Cross-Platform Integration</h2>
      <p class="text-gray-600 mb-4">Integration status component will be loaded here.</p>
      <div class="bg-gray-100 p-4 rounded">
        <p class="text-sm text-gray-500">Component temporarily disabled for build testing</p>
      </div>
    </div>

    <!-- API Capabilities -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
      <h2 class="text-2xl font-bold mb-6 text-gray-800">Voice API Capabilities</h2>
      
      <div class="grid md:grid-cols-2 gap-6">
        <!-- Call Management -->
        <div>
          <h3 class="text-lg font-semibold mb-3 text-gray-700">Call Management</h3>
          <ul class="space-y-2 text-sm text-gray-600">
            <li>âœ… Initiate outbound voice calls</li>
            <li>âœ… Real-time call status monitoring</li>
            <li>âœ… Call recording and playback</li>
            <li>âœ… Dynamic call flow control</li>
            <li>âœ… Multi-language support</li>
            <li>âœ… Call quality monitoring</li>
          </ul>
        </div>

        <!-- Speech Processing -->
        <div>
          <h3 class="text-lg font-semibold mb-3 text-gray-700">Speech Processing</h3>
          <ul class="space-y-2 text-sm text-gray-600">
            <li>âœ… Real-time speech-to-text</li>
            <li>âœ… Speaker diarization</li>
            <li>âœ… Language detection</li>
            <li>âœ… Confidence scoring</li>
            <li>âœ… Profanity filtering</li>
            <li>âœ… PII redaction</li>
          </ul>
        </div>

        <!-- TeXML Features -->
        <div>
          <h3 class="text-lg font-semibold mb-3 text-gray-700">TeXML Features</h3>
          <ul class="space-y-2 text-sm text-gray-600">
            <li>âœ… Dynamic voice responses</li>
            <li>âœ… Input gathering (speech/DTMF)</li>
            <li>âœ… Call recording control</li>
            <li>âœ… Call transfer and forwarding</li>
            <li>âœ… Conference management</li>
            <li>âœ… Custom call flows</li>
          </ul>
        </div>

        <!-- Integration -->
        <div>
          <h3 class="text-lg font-semibold mb-3 text-gray-700">Integration</h3>
          <ul class="space-y-2 text-sm text-gray-600">
            <li>âœ… Webhook event handling</li>
            <li>âœ… Session management</li>
            <li>âœ… AI response generation</li>
            <li>âœ… Database integration</li>
            <li>âœ… Analytics and reporting</li>
            <li>âœ… Real-time monitoring</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- API Endpoints -->
    <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
      <h2 class="text-2xl font-bold mb-6 text-gray-800">API Endpoints</h2>
      
      <div class="space-y-4">
        <div class="border-l-4 border-blue-500 pl-4">
          <h3 class="font-semibold text-gray-800">POST /api/voice/initiate</h3>
          <p class="text-sm text-gray-600">Initiate a new voice call with advanced features</p>
          <code class="text-xs bg-gray-100 p-2 rounded block mt-2">
            { "to": "+1234567890", "from": "+0987654321", "recordCall": true, "transcriptionEnabled": true }
          </code>
        </div>

        <div class="border-l-4 border-green-500 pl-4">
          <h3 class="font-semibold text-gray-800">GET /api/voice/sessions</h3>
          <p class="text-sm text-gray-600">Retrieve all active voice call sessions</p>
        </div>

        <div class="border-l-4 border-purple-500 pl-4">
          <h3 class="font-semibold text-gray-800">POST /api/voice/webhook</h3>
          <p class="text-sm text-gray-600">Handle Telnyx webhook events and TeXML responses</p>
        </div>

        <div class="border-l-4 border-orange-500 pl-4">
          <h3 class="font-semibold text-gray-800">POST /api/voice/transcribe</h3>
          <p class="text-sm text-gray-600">Process audio with Deepgram STT</p>
        </div>
      </div>
    </div>

    <!-- Usage Examples -->
    <div class="bg-white rounded-lg shadow-lg p-6">
      <h2 class="text-2xl font-bold mb-6 text-gray-800">Usage Examples</h2>
      
      <div class="space-y-6">
        <!-- Basic Call -->
        <div>
          <h3 class="text-lg font-semibold mb-3 text-gray-700">Basic Voice Call</h3>
          <pre class="bg-gray-100 p-4 rounded text-sm overflow-x-auto"><code>{`// Initiate a basic voice call
const response = await fetch('/api/voice/initiate', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    to: '+1234567890',
    from: '+0987654321',
    recordCall: true,
    transcriptionEnabled: true,
    language: 'en-US',
    timeout: 30,
    maxDuration: 300
  })
});

const { sessionId } = await response.json();
console.log('Call initiated:', sessionId);`}</code></pre>
        </div>

        <!-- TeXML Response -->
        <div>
          <h3 class="text-lg font-semibold mb-3 text-gray-700">TeXML Response</h3>
          <pre class="bg-gray-100 p-4 rounded text-sm overflow-x-auto"><code>// TeXML response for call flow
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Response&gt;
  &lt;Say voice="female" language="en-US"&gt;
    Hello! This is SHANGO, your AI Super Agent.
  &lt;/Say&gt;
  &lt;Gather input="speech dtmf" numDigits="1" timeout="10"&gt;
    How can I help you today?
  &lt;/Gather&gt;
  &lt;Record timeout="30" maxLength="300" playBeep="true"&gt;
  &lt;/Record&gt;
&lt;/Response&gt;</code></pre>
        </div>

        <!-- Webhook Handling -->
        <div>
          <h3 class="text-lg font-semibold mb-3 text-gray-700">Webhook Event Handling</h3>
          <pre class="bg-gray-100 p-4 rounded text-sm overflow-x-auto"><code>{`// Handle Telnyx webhook events
app.post('/api/voice/webhook', async (req, res) => {
  const { event_type, data } = req.body;
  
  switch (event_type) {
    case 'call.answered':
      console.log('Call answered:', data.call_control_id);
      break;
    case 'call.hangup':
      console.log('Call ended:', data.call_control_id);
      break;
    case 'call.recording.saved':
      // Process recording with Deepgram
      await processTranscription(data.recording_url);
      break;
  }
  
  res.status(200).json({ received: true });
});`}</code></pre>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
