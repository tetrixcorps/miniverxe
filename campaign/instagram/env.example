# Instagram Integration - Environment Variables
# =======================================================
#
# This file contains example environment variables for Instagram webhooks
# and messaging integration.
#
# Copy these to your .env file and fill in the actual values.

# -------------------------------------------------------
# WEBHOOK CONFIGURATION
# -------------------------------------------------------

# Verify Token (set this in Meta App Dashboard -> Webhooks)
# This is a string you define - use a strong random value
INSTAGRAM_VERIFY_TOKEN=your_secure_random_string_here

# App Secret (from Meta App Dashboard -> Settings -> Basic)
# Used to verify webhook signatures (HMAC SHA-256)
# Can use same as Facebook if sharing Meta App
INSTAGRAM_APP_SECRET=your_app_secret_here

# -------------------------------------------------------
# INSTAGRAM API CONFIGURATION
# -------------------------------------------------------

# Instagram Access Token (from Meta App Dashboard -> Instagram -> Settings)
# Required for sending messages and accessing Instagram Graph API
INSTAGRAM_ACCESS_TOKEN=your_instagram_access_token_here

# Instagram Business Account ID
INSTAGRAM_BUSINESS_ACCOUNT_ID=your_ig_business_account_id_here

# -------------------------------------------------------
# WEBHOOK ENDPOINT
# -------------------------------------------------------

# Webhook URL (must be publicly accessible HTTPS endpoint)
# Example for production: https://tetrix.com/api/webhooks/instagram
# Example for development: https://yourdomain.ngrok.io/api/webhooks/instagram
INSTAGRAM_WEBHOOK_URL=https://your-domain.com/api/webhooks/instagram

# -------------------------------------------------------
# OPTIONAL: GRAPH API CONFIGURATION
# -------------------------------------------------------

# Graph API Version (default: v21.0)
INSTAGRAM_GRAPH_API_VERSION=v21.0

# -------------------------------------------------------
# SETUP INSTRUCTIONS
# -------------------------------------------------------
#
# 1. CREATE/USE META APP
#    - Go to https://developers.facebook.com/apps
#    - Use existing app or create new one
#    - Add "Instagram" product
#
# 2. CONNECT INSTAGRAM BUSINESS ACCOUNT
#    - App Dashboard -> Instagram -> Settings
#    - Click "Connect Instagram Business Account"
#    - Login with Facebook account that manages Instagram
#    - Select Instagram Business Account
#
# 3. GENERATE ACCESS TOKEN
#    - App Dashboard -> Instagram -> Settings
#    - Under "Access Tokens", generate token
#    - Copy to INSTAGRAM_ACCESS_TOKEN
#
# 4. CONFIGURE WEBHOOKS
#    - App Dashboard -> Instagram -> Settings -> Webhooks
#    - Click "Add Callback URL"
#    - Enter your webhook URL and verify token
#    - Subscribe to webhook fields:
#      ✅ messages
#      ✅ messaging_postback
#      ✅ messaging_seen
#      ✅ messaging_deliveries
#      ✅ messaging_reaction
#      ✅ messaging_referral
#      ✅ messaging_optins
#      ✅ messaging_optouts
#      ✅ comments
#      ✅ mentions
#      ✅ story_insights
#      ✅ live_comments
#
# 5. SUBSCRIBE TO INSTAGRAM OBJECT
#    - App Dashboard -> Webhooks
#    - Subscribe to "Instagram" object
#    - Enable all webhook fields
#
# 6. GRANT INSTAGRAM PERMISSIONS
#    - Your Instagram Business Account must grant:
#      ✅ instagram_basic
#      ✅ instagram_manage_comments
#      ✅ instagram_manage_messages
#      ✅ instagram_manage_insights
#      ✅ pages_read_engagement
#      ✅ pages_manage_metadata
#
# 7. TEST WEBHOOK
#    - Send a DM to your Instagram Business Account
#    - Comment on one of your posts
#    - Check server logs for webhook events
#
# -------------------------------------------------------
# INSTAGRAM BUSINESS REQUIREMENTS
# -------------------------------------------------------
#
# To use Instagram Messaging API, you need:
# 1. Instagram Business Account (not Creator Account)
# 2. Facebook Page connected to Instagram account
# 3. Meta App with Instagram product added
# 4. App review approval for Instagram permissions
#
# -------------------------------------------------------
# SECURITY NOTES
# -------------------------------------------------------
#
# - NEVER commit actual tokens to version control
# - Use strong random strings for verify token
# - Always verify webhook signatures (HMAC SHA-256)
# - Use HTTPS for webhook endpoint
# - Rotate tokens periodically
# - Monitor for suspicious webhook activity
#
# -------------------------------------------------------
# DEBUGGING
# -------------------------------------------------------
#
# Test webhook signature verification:
# curl -X POST https://your-domain.com/api/webhooks/instagram \
#   -H "Content-Type: application/json" \
#   -H "x-hub-signature-256: sha256=<signature>" \
#   -d '{"object":"instagram","entry":[]}'
#
# View webhook logs in Meta App Dashboard:
# App Dashboard -> Webhooks -> View Logs
#
# Check Instagram Business Account ID:
# https://graph.facebook.com/v21.0/me?fields=id,username&access_token=YOUR_TOKEN
#

