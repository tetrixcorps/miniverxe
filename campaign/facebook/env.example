# Facebook Page Integration - Environment Variables
# =======================================================
#
# This file contains example environment variables for Facebook Page webhooks
# and Messenger integration.
#
# Copy these to your .env file and fill in the actual values.

# -------------------------------------------------------
# WEBHOOK CONFIGURATION
# -------------------------------------------------------

# Verify Token (set this in Meta App Dashboard -> Webhooks)
# This is a string you define - use a strong random value
FACEBOOK_VERIFY_TOKEN=your_secure_random_string_here

# App Secret (from Meta App Dashboard -> Settings -> Basic)
# Used to verify webhook signatures (HMAC SHA-256)
FACEBOOK_APP_SECRET=your_app_secret_here

# -------------------------------------------------------
# MESSENGER API CONFIGURATION
# -------------------------------------------------------

# Page Access Token (from Meta App Dashboard -> Messenger -> Settings)
# Required for sending messages and accessing Graph API
FACEBOOK_PAGE_ACCESS_TOKEN=your_page_access_token_here

# App ID (from Meta App Dashboard -> Settings -> Basic)
FACEBOOK_APP_ID=your_app_id_here

# -------------------------------------------------------
# PAGE CONFIGURATION
# -------------------------------------------------------

# Facebook Page ID (your business page)
FACEBOOK_PAGE_ID=your_page_id_here

# -------------------------------------------------------
# WEBHOOK ENDPOINT
# -------------------------------------------------------

# Webhook URL (must be publicly accessible HTTPS endpoint)
# Example for production: https://tetrix.com/api/webhooks/facebook-page
# Example for development: https://yourdomain.ngrok.io/api/webhooks/facebook-page
FACEBOOK_WEBHOOK_URL=https://your-domain.com/api/webhooks/facebook-page

# -------------------------------------------------------
# OPTIONAL: GRAPH API CONFIGURATION
# -------------------------------------------------------

# Graph API Version (default: v21.0)
FACEBOOK_GRAPH_API_VERSION=v21.0

# -------------------------------------------------------
# SETUP INSTRUCTIONS
# -------------------------------------------------------
#
# 1. CREATE META APP
#    - Go to https://developers.facebook.com/apps
#    - Click "Create App" -> "Business" type
#    - Add "Messenger" product
#
# 2. GENERATE PAGE ACCESS TOKEN
#    - App Dashboard -> Messenger -> Settings
#    - Under "Access Tokens", select your page
#    - Generate token and copy to FACEBOOK_PAGE_ACCESS_TOKEN
#
# 3. CONFIGURE WEBHOOKS
#    - App Dashboard -> Messenger -> Settings -> Webhooks
#    - Click "Add Callback URL"
#    - Enter your webhook URL and verify token
#    - Subscribe to webhook fields:
#      ✅ messages
#      ✅ messaging_postbacks
#      ✅ messaging_optins
#      ✅ messaging_optouts
#      ✅ message_deliveries
#      ✅ message_reads
#      ✅ messaging_referrals
#      ✅ message_reactions
#
# 4. SUBSCRIBE TO PAGE EVENTS
#    - App Dashboard -> Webhooks
#    - Subscribe to "Page" object
#    - Enable webhook fields:
#      ✅ messages (Messenger)
#      ✅ messaging_postbacks
#      ✅ messaging_optins
#      ✅ messaging_optouts
#      ✅ message_deliveries
#      ✅ message_reads
#      ✅ messaging_referrals
#      ✅ message_reactions
#      ✅ feed (Page posts)
#      ✅ mention (Page mentions)
#      ✅ leadgen (Lead forms)
#      ✅ ratings (Page ratings)
#
# 5. GRANT PAGE PERMISSIONS
#    - Your page admin must grant these permissions:
#      ✅ pages_messaging
#      ✅ pages_manage_metadata
#      ✅ pages_read_engagement
#      ✅ pages_manage_posts
#      ✅ pages_read_user_content
#      ✅ pages_manage_engagement
#      ✅ leads_retrieval (for lead gen)
#
# 6. TEST WEBHOOK
#    - Send a test message to your page
#    - Check server logs for webhook events
#
# -------------------------------------------------------
# SECURITY NOTES
# -------------------------------------------------------
#
# - NEVER commit actual tokens to version control
# - Use strong random strings for verify token
# - Always verify webhook signatures (HMAC SHA-256)
# - Use HTTPS for webhook endpoint
# - Rotate tokens periodically
# - Monitor for suspicious webhook activity
#
# -------------------------------------------------------
# DEBUGGING
# -------------------------------------------------------
#
# Test webhook signature verification:
# curl -X POST https://your-domain.com/api/webhooks/facebook-page \
#   -H "Content-Type: application/json" \
#   -H "x-hub-signature-256: sha256=<signature>" \
#   -d '{"object":"page","entry":[]}'
#
# View webhook logs in Meta App Dashboard:
# App Dashboard -> Webhooks -> View Logs
#

